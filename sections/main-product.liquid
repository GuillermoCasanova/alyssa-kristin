{% comment %}theme-check-disable TemplateLength{% endcomment %}
{% comment %}theme-check-disable ImgLazyLoading{% endcomment %}

<link
  rel="preload"
  href="{{ 'vendor-swiper.css' | asset_url }}"
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
>
<link
  rel="preload"
  href="{{ 'component-accordion.css' | asset_url }}"
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
>
<link
  rel="preload"
  href="{{ 'component-breadcrumbs.css' | asset_url }}"
  as="style"
  onload="this.onload=null;this.rel='stylesheet'"
>

<noscript><link rel="stylesheet" href="{{ 'vendor-swiper.css' | asset_url }}"></noscript>
<noscript><link rel="stylesheet" href="{{ 'component-accordion.css' | asset_url }}"></noscript>

<link rel="stylesheet" href="{{ 'component-deferred-media.css' | asset_url }}" media="print" onload="this.media='all'">

{{ 'section-main-product.css' | asset_url | stylesheet_tag }}
{{ 'component-modal.css' | asset_url | stylesheet_tag }}

<a class="skip-to-content-link button visually-hidden" href="#ProductInfo-{{ section.id }}">
  {{ 'accessibility.skip_to_product_info' | t }}
</a>

<section class="product-header master-padding-top">
  <div class="page-width is-small">
    <div class="product-header__inner">
      <span class="product-header__heading"> Products </span>
      <span class="product-header__subline">
        {{ product.type }}
      </span>
    </div>
  </div>
</section>

<section class="product page-width  is-small" data-product-container data-section="{{ section.id }}">
  <product-images-slideshow class="product__media-wrapper large--one-half text-center  product-images product-images--mobile">
    <div data-product-images-slideshow class="product-images-slideshow">
      <ul class="slides  product-images-slideshow__inner" data-product-images-slideshow-wrapper>
        {% for image in product.images %}
          {% unless image.alt contains 'swatch' %}
            <li
              class="slide"
              data-product-images-slideshow-slide
              data-product-images-modal-open
              data-id="{{ forloop.index }}"
            >
              <div class="product-images-slideshow__image-container">
                {% if forloop.index == 1 %}
                  <img
                    srcset="
                      {%- if image.width >= 165 -%}{{ image | image_url: width: 165 }} 165w,{%- endif -%}
                      {%- if image.width >= 360 -%}{{ image | image_url: width: 360 }} 360w,{%- endif -%}
                      {%- if image.width >= 533 -%}{{ image | image_url: width: 533 }} 533w,{%- endif -%}
                      {%- if image.width >= 720 -%}{{ image | image_url: width: 720 }} 720w,{%- endif -%}
                      {%- if image.width >= 940 -%}{{ image | image_url: width: 940 }} 940w,{%- endif -%}
                      {%- if image.width >= 1066 -%}{{ image | image_url: width: 1066 }} 1066w,{%- endif -%}
                      {{ image | image_url }} {{ image.width }}w
                    "
                    src="{{ image | image_url: width: 533 }}"
                    sizes="(min-width: 1200px) 45vw, (min-width: 940px) 100vw-60vw, 90vw"
                    alt="{{ image.alt | escape }}"
                    class="motion-reduce"
                    aria-hidden="true"
                    width="{{ image.width }}"
                    height="{{ image.height }}"
                  >
                {% else %}
                  <img
                    srcset="
                      {%- if image.width >= 165 -%}{{ image | image_url: width: 165 }} 165w,{%- endif -%}
                      {%- if image.width >= 360 -%}{{ image | image_url: width: 360 }} 360w,{%- endif -%}
                      {%- if image.width >= 533 -%}{{ image | image_url: width: 533 }} 533w,{%- endif -%}
                      {%- if image.width >= 720 -%}{{ image | image_url: width: 720 }} 720w,{%- endif -%}
                      {%- if image.width >= 940 -%}{{ image | image_url: width: 940 }} 940w,{%- endif -%}
                      {%- if image.width >= 1066 -%}{{ image | image_url: width: 1066 }} 1066w,{%- endif -%}
                      {{ image | image_url }} {{ image.width }}w
                    "
                    src="{{ image | image_url: width: 533 }}"
                    sizes="(min-width: 1200px) 45vw, (min-width: 940px) 100vw-60vw, 90vw"
                    alt="{{ image.alt | escape }}"
                    class="motion-reduce"
                    aria-hidden="true"
                    loading="lazy"
                    width="{{ image.width }}"
                    height="{{ image.height }}"
                  >
                {% endif %}
              </div>
            </li>
          {% endunless %}
        {% endfor %}
      </ul>
      <div
        data-product-images-slideshow-pagination
        class="product-images-slideshow__pagination product-images-slideshow__pagination--mobile"
      ></div>
    </div>

    <div data-product-images-slideshow-thumbs class="product-images-slideshow-thumbs">
      <ul class="slides" data-product-images-slideshow-thumbs-wrapper>
        {% for image in product.images %}
          <li
            class="slide product-images-slideshow-thumbs__thumbnail-container"
            data-product-images-slideshow-thumb
            data-id="{{ forloop.index }}"
          >
            <div
              class="product-images-slideshow-thumbs__thumbnail"
              role="button"
              aria-label="Go to image {{ forloop.index }}"
              data-thumb
              data-thumb-sizes="(min-width: 940px) calc(45vw / 4), 25vw"
              data-thumb-src="{{ image | image_url: width: 533 }}"
              data-thumb-srcset="
                {%- if image.width >= 165 -%}{{ image | image_url: width: 165 }} 165w,{%- endif -%}
                {%- if image.width >= 200 -%}{{ image | image_url: width: 200 }} 200w,{%- endif -%}
                {%- if image.width >= 360 -%}{{ image | image_url: width: 360 }} 360w,{%- endif -%}
                {%- if image.width >= 533 -%}{{ image | image_url: width: 533 }} 533w {%- endif -%}
              "
              data-thumb-width="{{ image.width }}"
              data-thumb-height="{{ image.height }}"
              data-thumb-alt="{{ image.alt | escape }}"
            ></div>
          </li>
        {% endfor %}
      </ul>
    </div>
  </product-images-slideshow>

  <div class="product__info-wrapper">
    <div
      id="ProductInfo-{{ section.id }}"
      class="product__info-container{% if section.settings.enable_sticky_info %} product__info-container--sticky{% endif %}"
    >
      <div class="product__info-header">
        {%- assign product_form_id = 'product-form-' | append: section.id -%}

        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when '@app' -%}
              {% render block %}

            {%- when 'title' -%}
              <h1 class="product__title" {{ block.shopify_attributes }}>
                {{ product.title | escape }}
              </h1>

            {%- when 'product_type' -%}
              <p class="product__subline">
                {{ product.type }}
              </p>
            {%- when 'price' -%}
              <div class="product__price no-js-hidden" id="price-{{ section.id }}" {{ block.shopify_attributes }}>
                {%- render 'price',
                  product: product,
                  use_variant: true,
                  show_badges: true,
                  price_class: 'price--large'
                -%}
              </div>
          {%- endcase -%}
        {% endfor %}
      </div>
      <!-- Product Form -->
      <div class="product__content">
        <div class="product__content__information">
          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when 'custom_color_picker' -%}
                <custom-color-picker class="hide-for-large-up" data-section="{{ section.id }}">
                  {% for collection in product.collections %}
                    {% assign activeProduct = product %}
                    {% assign collectionName = collection.title | downcase | handleize -%}
                    {% assign productName = product.title | downcase | split: ' - ' -%}
                    {% assign productNameHandle = productName[0] | handleize %}

                    {%- if productNameHandle == collectionName and product.metafields.color_swatch.name -%}
                      {% assign activeCollection = collection %}
                      <div class="custom-color-picker  x-product-form__input">
                        <fieldset>
                          <legend class="custom-color-picker__current-color">
                            <span class="custom-color-picker__current-color__label"
                              ><span class="visually-hidden"> Toggle</span>Color:</span
                            >
                            <span data-color-container aria-hidden="true">
                              {% for product in activeCollection.products %}
                                {% if product.handle == activeProduct.handle %}
                                  {{ activeProduct.metafields.color_swatch.name }}
                                {% endif %}
                              {% endfor %}
                            </span>
                          </legend>
                          <span class="custom-color-picker__colors">
                            {% for product in activeCollection.products %}
                              {% if product.metafields.color_swatch.name != blank
                                and product.metafields.color_swatch.hex_color != blank
                              %}
                                <span class="custom-color-picker__color {% if product.handle == activeProduct.handle %}is-selected{% endif %}">
                                  <input
                                    type="radio"
                                    id="{{ section.id }}-{{ product.id }}-{{ product.metafields.color_swatch.name }}"
                                    name="color"
                                    value="{{ product.metafields.color_swatch.name | escape }}"
                                    title="Shop {{ product.title }} in {{ product.metafields.color_swatch.name }}"
                                    data-color-option
                                    data-product="{{ product | json | escape }}"
                                    data-color-name="{{ product.metafields.color_swatch.name | escape }}"
                                    data-product-title="{{ product.title }}"
                                    data-handle="{{ product.handle }}"
                                    data-product-url="{{ product.url }}"
                                    data-product-id="{{ product.id }}"
                                    data-swatch="{{ product.metafields.color_swatch.name }}"
                                    class="custom-color-picker__input"
                                  >
                                  <label
                                    class="custom-color-picker__label"
                                    for="{{ section.id }}-{{ product.id }}-{{ product.metafields.color_swatch.name }}"
                                    data-color-label
                                    data-color-name="{{ product.metafields.color_swatch.name }}"
                                  >
                                    <span
                                      class="custom-color-picker__label__swatch"
                                      style="background-color: {{ product.metafields.color_swatch.hex_color }};"
                                    >
                                    </span>
                                    <span class="custom-color-picker__label__ring"> </span>
                                  </label>
                                </span>
                              {% endif %}
                            {% endfor %}
                          </span>
                        </fieldset>
                      </div>
                    {%- endif -%}
                  {% endfor %}
                </custom-color-picker>

              {%- when 'text' -%}
                <div class="product__text">
                  <p class="" {{ block.shopify_attributes }}>
                    {{- block.settings.text -}}
                  </p>
                </div>
              {%- when 'rich_text' -%}
                <div class="product__text">
                  {{- block.settings.text -}}
                </div>
              {%- when 'description' -%}
                {%- if product.description != blank -%}
                  <div class="product__text" data-product-description-container>
                    {{ product.description }}
                  </div>
                {%- endif -%}
              {%- when 'size_chart' -%}
                {% if product.metafields.sizing.size_chart %}
                  <div class="product__accordion accordion" {{ block.shopify_attributes }}>
                    <details>
                      <summary>
                        <div class="summary__title">
                          <h2 class="accordion__title">
                            {{ block.settings.heading | default: block.settings.page.title }}
                          </h2>
                        </div>
                        <div class="accordion__icon">
                          <svg>
                            <use href="#icon-plus-sign"></use>
                          </svg>
                        </div>
                      </summary>
                      <div class="accordion__content rte">
                        <div
                          class="size-chart"
                          data-size-chart
                          aria-label="{{ product.metafields.sizing.size_chart.value.title }}"
                        >
                          {{ product.metafields.sizing.size_chart.value.content }}
                        </div>
                      </div>
                    </details>
                  </div>

                  <script>
                    document.addEventListener('DOMContentLoaded', function () {
                      document
                        .querySelector('[data-size-chart]')
                        .querySelectorAll('tr')
                        .forEach(function (elem) {
                          elem.style.removeProperty('width');
                          elem.style.removeProperty('height');
                        });

                      document
                        .querySelector('[data-size-chart]')
                        .querySelectorAll('td')
                        .forEach(function (elem) {
                          elem.style.removeProperty('width');
                          elem.style.removeProperty('height');
                        });

                      document
                        .querySelector('[data-size-chart]')
                        .querySelectorAll('div')
                        .forEach(function (elem) {
                          elem.remove();
                        });
                    });
                  </script>
                {% endif %}
              {%- when 'collapsible_tab' -%}
                <div class="product__accordion accordion  product-information" {{ block.shopify_attributes }}>
                  <details>
                    <summary>
                      <div class="summary__title">
                        <h2 class="h4 accordion__title">{{ block.settings.heading }}</h2>
                      </div>
                      <div class="accordion__icon">
                        <svg>
                          <use href="#icon-plus-sign"></use>
                        </svg>
                      </div>
                    </summary>
                    <div class="accordion__content rte" data-product-description-container>
                      {{ block.settings.content }}
                      {{ block.settings.page }}
                    </div>
                  </details>
                </div>

              {%- when 'flavor_profile' -%}
                <div class="product__text  product__flavor-profile">
                  {% if product.metafields.description.flavor_profile %}
                    {{ product.metafields.description.flavor_profile | metafield_tag }}
                  {% endif %}
                </div>
            {%- endcase -%}
          {% endfor %}
        </div>

        <div class="product__content__form">
          {%- for block in section.blocks -%}
            {%- case block.type -%}
              {%- when 'quantity_selector' -%}
                <div
                  class="product-form__input product-form__quantity"
                  {{ block.shopify_attributes }}
                >
                  <label class="form__label visually-hidden" for="Quantity-{{ section.id }}">
                    {{ 'products.product.quantity.label' | t }}
                  </label>

                  <quantity-input class="quantity">
                    <button class="quantity__button no-js-hidden" name="minus" type="button">
                      <span class="visually-hidden">
                        {{- 'products.product.quantity.decrease' | t: product: product.title | escape -}}
                      </span>
                      {% render 'icon-minus' %}
                    </button>
                    <input
                      class="quantity__input"
                      type="number"
                      name="quantity"
                      id="Quantity-{{ section.id }}"
                      min="1"
                      value="1"
                      form="{{ product_form_id }}"
                    >
                    <button class="quantity__button no-js-hidden" name="plus" type="button">
                      <span class="visually-hidden">
                        {{- 'products.product.quantity.increase' | t: product: product.title | escape -}}
                      </span>
                      {% render 'icon-plus' %}
                    </button>
                  </quantity-input>
                </div>

              {%- when 'variant_picker' -%}
                {%- unless product.has_only_default_variant -%}
                  <variant-radios
                    class="no-js-hidden"
                    data-section="{{ section.id }}"
                    data-url="{{ product.url }}"
                    {{ block.shopify_attributes }}
                  >
                    {%- for option in product.options_with_values -%}
                      <div class="js product-form__variant-options">
                        <fieldset>
                          <legend class="product-form__variant-options__label">
                            <span class="product-form__variant-options__label__text"> {{ option.name }}: </span>
                            <span
                              class="product-form__variant-options__current-option-label"
                              role="presentation"
                              data-current-option
                              aria-hidden="true"
                            >
                              {{ option.selected_value }}
                            </span>
                          </legend>
                          <div class="product-form__variant-options__options">
                            {%- for value in option.values -%}
                              <div class="product-form__variant-options__option">
                                <input
                                  type="radio"
                                  id="{{ section.id }}-{{ option.name }}-{{ forloop.index0 }}"
                                  name="{{ option.name }}-{{ product.handle }}"
                                  value="{{ value | escape }}"
                                  form="{{ product_form_id }}"
                                  {% if option.selected_value == value %}
                                    checked
                                  {% endif %}
                                >
                                <label
                                  for="{{ section.id }}-{{ option.name }}-{{ forloop.index0 }}"
                                  data-option-label
                                  data-option-name="{{ value | escape }}"
                                >
                                  {{ value }}
                                </label>
                              </div>
                            {%- endfor -%}
                          </div>
                        </fieldset>
                      </div>
                    {%- endfor -%}
                    <script type="application/json">
                      {{ product.variants | json }}
                    </script>
                  </variant-radios>
                {%- endunless -%}
                <noscript>
                  <div class="product-form__input{% if product.has_only_default_variant %} hidden{% endif %}">
                    <label class="form__label" for="Variants-{{ section.id }}">
                      {{- 'products.product.product_variants' | t -}}
                    </label>
                    <div class="select">
                      <select name="id" id="Variants-{{ section.id }}" class="select__select" form="product-form">
                        {%- for variant in product.variants -%}
                          <option
                            {% if variant == product.selected_or_first_available_variant %}
                              selected="selected"
                            {% endif %}
                            {% if variant.available == false %}
                              disabled
                            {% endif %}
                            value="{{ variant.id }}"
                          >
                            {{ variant.title }}
                            {%- if variant.available == false %} - {{ 'products.product.sold_out' | t }}{% endif %}
                            - {{ variant.price | money | strip_html }}
                          </option>
                        {%- endfor -%}
                      </select>
                      {% render 'icon-caret' %}
                    </div>
                  </div>
                </noscript>
              {%- when 'custom_color_picker' -%}
                <custom-color-picker class="show-for-large-up" data-section="{{ section.id }}">
                  {% for collection in product.collections %}
                    {% assign activeProduct = product %}
                    {% assign collectionName = collection.title | downcase | handleize -%}
                    {% assign productName = product.title | downcase | split: ' - ' -%}
                    {% assign productNameHandle = productName[0] | handleize %}

                    {%- if productNameHandle == collectionName and product.metafields.color_swatch.name -%}
                      {% assign activeCollection = collection %}
                      <div class="custom-color-picker  x-product-form__input">
                        <fieldset>
                          <legend class="custom-color-picker__current-color">
                            <span class="custom-color-picker__current-color__label"
                              ><span class="visually-hidden"> Toggle</span>Color:</span
                            >
                            <span
                              data-color-container
                              class="custom-color-picker__current-color__name"
                              aria-hidden="true"
                            >
                              {% for product in activeCollection.products %}
                                {% if product.handle == activeProduct.handle %}
                                  {{ activeProduct.metafields.color_swatch.name }}
                                {% endif %}
                              {% endfor %}
                            </span>
                          </legend>
                          <span class="custom-color-picker__colors">
                            {% for product in activeCollection.products %}
                              {% if product.metafields.color_swatch.name != blank
                                and product.metafields.color_swatch.hex_color != blank
                              %}
                                <span class="custom-color-picker__color {% if product.handle == activeProduct.handle %}is-selected{% endif %}">
                                  <input
                                    type="radio"
                                    id="{{ section.id }}-{{ product.id }}-{{ product.metafields.color_swatch.name }}-desktop"
                                    name="color_radios"
                                    value="{{ product.metafields.color_swatch.name | escape }}"
                                    title="Shop {{ product.title }} in {{ product.metafields.color_swatch.name }}-desktop"
                                    data-color-option
                                    data-product="{{ product | json | escape }}"
                                    data-color-name="{{ product.metafields.color_swatch.name | escape }}"
                                    data-product-title="{{ product.title }}"
                                    data-handle="{{ product.handle }}"
                                    data-product-url="{{ product.url }}"
                                    data-product-id="{{ product.id }}"
                                    data-product-first-variant="{{ product.selected_variant.id }}"
                                    data-swatch="{{ product.metafields.color_swatch.name }}-desktop"
                                    class="custom-color-picker__input"
                                  >
                                  <label
                                    class="custom-color-picker__label"
                                    for="{{ section.id }}-{{ product.id }}-{{ product.metafields.color_swatch.name }}-desktop"
                                    data-color-label
                                    data-color-name="{{ product.metafields.color_swatch.name }}"
                                  >
                                    <span
                                      class="custom-color-picker__label__swatch"
                                      style="background-color: {{ product.metafields.color_swatch.hex_color }};"
                                    >
                                    </span>
                                    <span class="custom-color-picker__label__ring"> </span>
                                  </label>
                                </span>
                              {% endif %}
                            {% endfor %}
                          </span>
                        </fieldset>
                      </div>
                    {%- endif -%}
                  {% endfor %}
                </custom-color-picker>
                <script src="{{ 'custom-color-picker.js' | asset_url }}" defer="defer"></script>
              {%- when 'back-in-stock' -%}
                <back-in-stock
                  data-variant-id
                  data-section="{{ section.id }}"
                  class="{%- if product.selected_or_first_available_variant.available == false -%} is-visible {%else%} is-hidden {% endif %}"
                >
                  <details>
                    <summary
                      aria-expanded="false"
                      role="button"
                      aria-label="Back in stock form toggle"
                      class="back-in-stock__summary button  button--primary  button--large"
                    >
                      <span class="back-in-stock__summary__default" data-default-text>
                        {{ block.settings.button_cta_text }}
                      </span>

                      <span class="back-in-stock__summary__loader" data-loader>
                        <div class="loader"></div>
                      </span>

                      <alert class="back-in-stock__summary__success" data-success-text>
                        {{ block.settings.button_success_text }}
                      </alert>
                    </summary>
                    <div class="back-in-stock__content" data-content>
                      <form
                        id="back-in-stock-form"
                        aria-label="Display back in stock form"
                        name="Back in stock form"
                        class="back-in-stock__form"
                      >
                        <button
                          type="submit"
                          class="back-in-stock__form__submit-button"
                          aria-label="Sign up and get notified when this item comes back in stock."
                        >
                          <span class="visually-hidden"> Sign Up </span>
                          <svg class="button__icon">
                            <use href="#arrow-right"/>
                          </svg>
                        </button>
                        <div class="back-in-stock-form__section">
                          <label for="email" class="visually-hidden">Email (required)</label>
                          <input
                            type="email"
                            id="email"
                            name="email"
                            required
                            placeholder="Enter your email"
                            class="back-in-stock__form__input  input--large"
                          >
                        </div>
                      </form>
                    </div>
                  </details>
                </back-in-stock>
              {%- when 'buy_buttons' -%}
                <div class="product-form" {{ block.shopify_attributes }}>
                  <product-form data-section="{{ section.id }}">
                    {%- form 'product',
                      product,
                      id: product_form_id,
                      class: 'form',
                      novalidate: 'novalidate',
                      data-type: 'add-to-cart-form'
                    -%}
                      <input
                        type="hidden"
                        name="id"
                        value="{{ product.selected_or_first_available_variant.id }}"
                        data-active-product-id
                        class="show-for-large-up"
                      >
                      <div class="product-form__buttons">
                        <button
                          type="submit"
                          name="add"
                          class="
                            product-form__submit button button--full-width
                            button--large
                            button--primary
                          "
                          {% if product.selected_or_first_available_variant.available == false %}
                            disabled
                          {% endif %}
                        >
                          {% if product.selected_or_first_available_variant.available == false %}
                            <span class="product-form__submit__text"> Sold Out </span>
                          {% else %}
                            <span class="product-form__submit__text"> Add to Cart </span>
                          {% endif %}
                          <div class="loading-spinner hidden">
                            <svg
                              aria-hidden="true"
                              focusable="false"
                              class="spinner"
                              viewBox="0 0 66 66"
                              xmlns="http://www.w3.org/2000/svg"
                            >
                              <circle class="path" fill="none" stroke-width="6" cx="33" cy="33" r="30"></circle>
                            </svg>
                          </div>
                        </button>
                      </div>
                    {%- endform -%}
                  </product-form>
                </div>

              {% when 'buy_near_me' %}
                <div class="product__buy-near-me">
                  <button
                    class="button--large button--primary"
                    data-modal="buy-near-me"
                    aria-expanded="false"
                    aria-haspopup="dialog"
                    aria-label="Open buy near me modal"
                    aria-controls="buy-near-me-modal"
                  >
                    Buy Near Me
                  </button>
                </div>
              {% when 'buy_third_party' %}
                <div class="product__buy-near-me">
                  {{
                    product.metafields.custom.third_party_buy_link
                    | metafield_tag
                    | replace: '<a ',
                      '<a    aria-label="Purhcase via third party vendor" target="_blank"  class="button button--large button--primary" '
                  }}
                </div>
            {%- endcase -%}
          {%- endfor -%}
        </div>
      </div>
    </div>
  </div>

  {% for block in section.blocks %}
    {%- case block.type -%}
      {% when 'buy_near_me' %}
        <modal-buy-near-me id="buy-near-me">
          <div
            role="dialog"
            aria-live="assertive"
            aria-modal="true"
            aria-labelledby="modal-title"
            id="buy-near-me-modal"
            aria-hidden="true"
            data-allow-scroll="true"
            class="modal"
          >
            <div class="modal__inner">
              <div class="modal__close">
                <button aria-label="Close Modal" data-modal-close>
                  <span class="button__text">Close</span>
                  <span class="button__decorative-elem"></span>
                </button>
              </div>
              <div class="modal__content">
                <h1 id="modal-title" class="visually-hidden">Find Ajornada Near You</h1>
                <div class="buy-near-me-map-container">
                  {{ product.metafields.custom.near_me_embed }}
                </div>
              </div>
            </div>
            <div class="modal__cover" aria-hidden="true"></div>
          </div>
        </modal-buy-near-me>
        <script src="{{ 'modal-buy-near-me.js' | asset_url }}" defer="defer"></script>
    {% endcase %}
  {%- endfor -%}

  <script type="application/ld+json">
    {
      "@context": "http://schema.org/",
      "@type": "Product",
      "name": {{ product.title | json }},
      "url": {{ request.origin | append: product.url | json }},
      {% if seo_media -%}
        "image": [
          {{ seo_media | image_url: width: seo_media.preview_image.width | prepend: "https:" | json }}
        ],
      {%- endif %}
      "description": {{ product.description | strip_html | json }},
      {% if product.selected_or_first_available_variant.sku != blank -%}
        "sku": {{ product.selected_or_first_available_variant.sku | json }},
      {%- endif %}
      "brand": {
        "@type": "Thing",
        "name": {{ product.vendor | json }}
      },
      "offers": [
        {%- for variant in product.variants -%}
          {
            "@type" : "Offer",
            {%- if variant.sku != blank -%}
              "sku": {{ variant.sku | json }},
            {%- endif -%}
            "availability" : "http://schema.org/{% if variant.available %}InStock{% else %}OutOfStock{% endif %}",
            "price" : {{ variant.price | divided_by: 100.00 | json }},
            "priceCurrency" : {{ cart.currency.iso_code | json }},
            "url" : {{ request.origin | append: variant.url | json }}
          }{% unless forloop.last %},{% endunless %}
        {%- endfor -%}
      ]
    }
  </script>

  <script type="application/json" id="product-json">
    {{ product | json }}
  </script>
</section>

<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'back-in-stock.js' | asset_url }}" defer="defer"></script>
<script type="module" src="{{ 'product-images.js' | asset_url }}" defer="defer"></script>

{% schema %}
{
  "name": "t:sections.main-product.name",
  "tag": "section",
  "class": "product-section spaced-section",
  "blocks": [
    {
      "type": "@app"
    },
    {
      "type": "text",
      "name": "t:sections.main-product.blocks.text.name",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "default": "Text block",
          "label": "t:sections.main-product.blocks.text.settings.text.label",
          "info": "Enter the text for this block."
        },
        {
          "type": "select",
          "id": "text_style",
          "options": [
            {
              "value": "body",
              "label": "t:sections.main-product.blocks.text.settings.text_style.options__1.label"
            },
            {
              "value": "subtitle",
              "label": "t:sections.main-product.blocks.text.settings.text_style.options__2.label"
            },
            {
              "value": "uppercase",
              "label": "t:sections.main-product.blocks.text.settings.text_style.options__3.label"
            }
          ],
          "default": "body",
          "label": "t:sections.main-product.blocks.text.settings.text_style.label",
          "info": "Select the style for the text."
        }
      ]
    },
    {
      "type": "rich_text",
      "name": "Rich Text",
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>Lorem Ipsum</p>",
          "label": "Content",
          "info": "Enter the rich text content."
        }
      ]
    },
    {
      "type": "flavor_profile",
      "name": "Flavor Profile",
      "settings": [
        {
          "type": "paragraph",
          "content": "Pulls from the product's flavor profile metafield if they have one set."
        }
      ]
    },
    {
      "type": "buy_near_me",
      "name": "Buy Near Me",
      "settings": [
        {
          "type": "paragraph",
          "content": "Pulls up the Buy Near Me User Experience. Iframe is pulled from product's metafields."
        }
      ]
    },
    {
      "type": "buy_third_party",
      "name": "Third party Buy Link",
      "settings": [
        {
          "type": "paragraph",
          "content": "Creates a button that goes to a third party site to complete the purchase. URL is pulled from product's metafields."
        }
      ]
    },
    {
      "type": "title",
      "name": "t:sections.main-product.blocks.title.name",
      "limit": 1
    },
    {
      "type": "product_type",
      "name": "Product Type",
      "limit": 1
    },
    {
      "type": "price",
      "name": "t:sections.main-product.blocks.price.name",
      "limit": 1
    },
    {
      "type": "quantity_selector",
      "name": "t:sections.main-product.blocks.quantity_selector.name",
      "limit": 1
    },
    {
      "type": "variant_picker",
      "name": "t:sections.main-product.blocks.variant_picker.name",
      "limit": 1,
      "settings": [
        {
          "type": "select",
          "id": "picker_type",
          "options": [
            {
              "value": "dropdown",
              "label": "t:sections.main-product.blocks.variant_picker.settings.picker_type.options__1.label"
            },
            {
              "value": "button",
              "label": "t:sections.main-product.blocks.variant_picker.settings.picker_type.options__2.label"
            }
          ],
          "default": "button",
          "label": "t:sections.main-product.blocks.variant_picker.settings.picker_type.label",
          "info": "Select the type of variant picker."
        }
      ]
    },
    {
      "type": "custom_color_picker",
      "name": "Custom Color Picker",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "picker_label",
          "label": "Picker Label",
          "info": "Enter the label for the color picker."
        }
      ]
    },
    {
      "type": "buy_buttons",
      "name": "t:sections.main-product.blocks.buy_buttons.name",
      "limit": 1,
      "settings": [
        {
          "type": "checkbox",
          "id": "show_dynamic_checkout",
          "default": true,
          "label": "t:sections.main-product.blocks.buy_buttons.settings.show_dynamic_checkout.label",
          "info": "If checked, the dynamic checkout will be shown."
        }
      ]
    },
    {
      "type": "description",
      "name": "t:sections.main-product.blocks.description.name",
      "limit": 1
    },
    {
      "type": "collapsible_tab",
      "name": "t:sections.main-product.blocks.collapsible_tab.name",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "default": "Collapsible tab",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.heading.label",
          "info": "Enter the heading for the collapsible tab."
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.content.label",
          "info": "Enter the content for the collapsible tab."
        },
        {
          "type": "page",
          "id": "page",
          "label": "t:sections.main-product.blocks.collapsible_tab.settings.page.label",
          "info": "Select the linked page for the collapsible tab."
        }
      ]
    },
    {
      "type": "product-support",
      "name": "Product Support",
      "settings": [
        {
          "type": "text",
          "id": "headline",
          "default": "Text block",
          "label": "Headline",
          "info": "Enter the headline for the product support section."
        },
        {
          "type": "richtext",
          "id": "body",
          "label": "Body",
          "info": "Enter the body content for the product support section."
        }
      ]
    },
    {
      "name": "Size Chart",
      "type": "size-chart",
      "settings": [
        {
          "type": "text",
          "id": "name",
          "label": "Chart Name",
          "info": "Enter the name of the size chart."
        },
        {
          "type": "page",
          "id": "size-chart",
          "label": "Size Chart",
          "info": "Select the linked size chart page."
        }
      ]
    },
    {
      "name": "Back In Stock",
      "type": "back-in-stock",
      "settings": [
        {
          "type": "text",
          "id": "button_cta_text",
          "label": "Button CTA Text",
          "default": "Notify Me",
          "info": "The text the button will have"
        },
        {
          "type": "text",
          "id": "button_success_text",
          "default": "Success",
          "label": "Subscription Success Text",
          "info": "The text that will appear when subscribed."
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "t:sections.main-product.settings.header.content",
      "info": "t:sections.main-product.settings.header.info"
    },
    {
      "type": "checkbox",
      "id": "enable_sticky_info",
      "default": true,
      "label": "t:sections.main-product.settings.enable_sticky_info.label",
      "info": "If checked, enable sticky info."
    },
    {
      "type": "checkbox",
      "id": "enable_video_looping",
      "default": false,
      "label": "t:sections.main-product.settings.enable_video_looping.label",
      "info": "If checked, enable video looping."
    }
  ]
}
{% endschema %}
